<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Notes App Testing2</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="../JQuery CSS & Bootstrap file/bootstrap-4.3.1-dist/css/bootstrap.min.css">
  <link rel="stylesheet" type="text/css" href="../JQuery CSS & Bootstrap file/fontawesome-free-5.10.2-web/css/all.min.css">
    <link rel="stylesheet" href="../JQuery CSS & Bootstrap file/animate.css">
	<style>
		.fa-trash-alt,.fa-thumbtack,.fa-clock{color: rgba(66,123,255,.8);}
		.fa-trash-alt:hover,.fa-thumbtack:hover{
			cursor: pointer;
			transform: scale(1.1) rotate(10deg);
			transition: all .2s;
		}
    .fa-trash-alt:hover{color: #ff0000 !important;}
    .fa-thumbtack:hover{color: #ffff00 !important;}
    .fa-thumbtack{transform: rotate(45deg);}
		.gradient{background-image:linear-gradient(to top right,rgba(6,232,249,.3),rgba(66,123,255,.3));}
		.gradient_border{
			border: 3px groove rgba(66,123,255,.4);
			border-radius: 30px 90px/90px 30px;
			box-shadow: 2px 2px 2px 1px #000;
		}
		#addBtn{
			border-radius: 30px 90px/90px 30px;
			box-shadow: 2px 2px 2px 1px #000;
			background-image:linear-gradient(to top right,rgba(6,232,249,.8),rgba(66,123,255,.8));
		}
    .btn{
      background-image:linear-gradient(to top right,rgba(6,232,249,.8),rgba(66,123,255,.8))!important;
      border-radius: 30px 90px/90px 30px;
    }
		#addBtn:hover,.btn:hover{
			background-image:linear-gradient(to top right,rgba(66,123,255,.8),rgba(6,232,249,.8))!important;
			transition: all .2s;
		}
    .btn:hover .searchbox i{
      color: #fff !important;
    }
		.SearchDecoration{border-radius: 30px 90px/90px 30px;}
		.addTitleDeco, .textAreaDeco{
			border-radius: 30px 90px/90px 30px;
			box-shadow: 2px 2px 2px 1px #000;
		}
		.card{border:none !important;}

    .dropdown .dropdown-menu li:hover{
      background: dodgerblue;
      color: #fff;
      cursor: pointer;
    }
    .dropdown-toggle[aria-expanded="true"]:after{
      rotate: 180deg;
    }
    .dropdown-toggle:after{
      transition: .5s;
    }
    .dropdown-divider{
      border-bottom: 2px dashed dodgerblue;
    }
    @media (max-width: 768px){
      .fa-search{
        color: #fff;
      }
    }
    @media (min-width: 992px){
          .searchbox{
        /* display: flex; */
        background-color: #66b2ff;
        padding: 0 10px;
        /* border-radius: 10px; */
        border-radius: 30px 90px/90px 30px;
      }
      .searchbox input{
        /* line-height: 40px; */
        background: none !important;
        border: none !important;
        outline: none !important;
        color: white !important;
        font-size: 16px ;
        width: 0px !important;
        transition: all 0.5s;
        margin: 0 !important;
        padding: 0!important;
      }
      .searchbox:hover input{
        width: 200px !important;
      }
      .searchbox input:focus{
        width: 200px !important;
      }
      .SearchDecoration::placeholder{
        color: rgba(255,255,255,.7);
      }
      .searchbox button{
        height: 40px;
        width: 40px;
        background: none;
        color: white !important;
        border: none !important;
        outline: none !important;
        
      }
      .searchbox:hover button{
        /* color: black;
        background-color: white; */
        border-radius: 50%;
        cursor: pointer;
      }
      .searchbox input:focus + button{
        /* color: black; */
        /* background-color: white; */
        background-image:linear-gradient(to top right,rgba(66,123,255,.8),rgba(6,232,249,.8))!important;
        border-radius: 50%;
      }
    }
    /* @media(max-width: 1024px) and (min-resolution: 120dpi)
    {
      .SearchDecoration{border-radius: 30px 90px/90px 30px;}
    } */
    /* .bootstrap-select .form-control:focus{
      outline: 0px none #fff !important;
    }
    .bootstrap-select .form-control > div.filter-option:focus{
      outline: 0px none #fff !important;
    }
    .bootstrap-select .form-control > div.filter-option > div.filter-option-inner:focus{
      outline: 0px none #fff !important;
    }
    .bootstrap-select .form-control > div.filter-option > div.filter-option-inner > div.filter-option-inner-inner:focus{
      outline: 0px none #fff !important;
    }
    input[type="search"]::-webkit-search-cancel-button{
      -webkit-appearance: none;
      color: #fff;
    } */
	</style>
</head>
<body>
	    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <a class="navbar-brand" href="#">Magic Notes</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav mr-auto"></ul>
            <form class="d-flex form-inline my-2 my-lg-0 searchbox">
                <input class="form-control  SearchDecoration" id="searchTxt" type="search" placeholder="Search with Title/Note" aria-label="Search" autocomplete="off">
                <button class="btn my-2 my-sm-0" type="submit"><i class="fa fa-search fa-lg" title="Search"></i></button>
            </form>
        </div>
    </nav>


 <div class="container my-3 text-center">
        <h1>Welcome To Magic Notes</h1>
        <div class="card">
            <div class="card-body">
                <div class="form-group">
                    <h5 class="card-title">Add Title</h5>
                    <input type="text" class="form-control addTitleDeco" id="addTitle" aria-describedby="title"
                        placeholder="Enter Title">
                </div>
                <h5 class="card-title">Add a Note</h5>
                <div class="form-group">
                    <textarea class="form-control textAreaDeco" id="addTxt" rows="3" placeholder="Please Write a Note"></textarea>
                </div>
              <button class="btn btn-primary" id="addBtn">Add Note</button>
            </div>
        </div>
        <hr>
        <h1>Your Notes</h1>
        <hr>
        <div class="dropdown text-right">
          <i title="Filters" class="fa fa-filter dropdown-toggle" data-toggle="dropdown" aria-expanded="false"></i>
          <div class="dropdown-menu text-center">
            <h2 class="dropdown-header text-uppercase text-primary">Filter By :</h2>
            <div class="dropdown-divider"></div>
            <li class="dropdown-item">Any Time</li>
            <li class="dropdown-item">Last Year</li>
            <li class="dropdown-item">Last Month</li>
            <li class="dropdown-item">Last Week</li>
            <li class="dropdown-item">Last Hour</li>
            <li class="dropdown-item">Today</li>
            <li class="dropdown-item">This Week</li>
            <li class="dropdown-item">This Month</li>
            <li class="dropdown-item">This Year</li>
            <li class="dropdown-item">Custom Date & Time</li>
          </div>
        </div>
        <div id="notes" class="row container-fluid d-flex justify-content-center"> </div>
    </div>


	<script src="../JQuery CSS & Bootstrap file/jquery-3.4.1.min.js"></script>
  <script src="../JQuery CSS & Bootstrap file/New folder/popper.min.js"></script>
  <script src="../JQuery CSS & Bootstrap file/bootstrap-4.3.1-dist/js/bootstrap.min.js"></script>
	<script>
showNotes();

// If user adds a note, add it to the localStorage
let addBtn = document.getElementById("addBtn");
addBtn.addEventListener("click", function(e) {
  let addTitle = document.getElementById("addTitle");
  let addTxt = document.getElementById("addTxt");
  let d = new Date();
  let DATE = d.toDateString();
  let Time = d.toLocaleTimeString();
  let notes = localStorage.getItem("notes");
  
  if (notes == null) {
    notesObj = [];
  } else {
    notesObj = JSON.parse(notes);
  }
   if(addTitle.value=="" || addTxt.value==""){
      alert("Plz fill both Add Title and add Note Field.");
      return;
   }
   let removeSpaceTitle = addTitle.value.replace(/^\s+|\s+$/gm,"");
   let removeSpaceTxt = addTxt.value.replace(/^\s+|\s+$/gm,"");
   if(removeSpaceTitle.length<=0 || removeSpaceTxt.length<=0)
    {
        alert("White Spaces is not allowed.");
        return;
    }
  //  if(addTitle.value.replace(/^\s+|\s+$/gm,"").length<=0 || addTxt.value.replace(/^\s+|\s+$/gm,"").length<=0)
  let myobj = {
  	title: removeSpaceTitle,
  	text: removeSpaceTxt,
    date: DATE,
    time:Time
  }
  notesObj.push(myobj);
  localStorage.setItem("notes", JSON.stringify(notesObj));
  addTitle.value = "";
  addTxt.value = "";
//   console.log(notesObj);
  showNotes();
});

// Function to show elements from localStorage
function showNotes() {
  let notes = localStorage.getItem("notes");
  if (notes == null) {
    notesObj = [];
  } else {
    notesObj = JSON.parse(notes);
  }
  let html = "";
  notesObj.forEach(function(element, index) {
	html += `
        <div class="noteCard my-2 mx-2 card" style="width: 18rem;height:fit-content;">
            	<div class="card-body gradient gradient_border">
                	<h5 class="card-title font-italic">${element.title}</h5>
                	<p class="card-text font-italic">${element.text}</p>
                  <div class="d-flex justify-content-between text-muted">
                    <p class="card-text font-italic"><i class="far fa-clock fa-lg mx-1"></i>${element.date}</p>
                    <p class="card-text font-italic">${element.time}</p>
                  </div>
			            <div class="fa-2x text-left">
                    <i data-target="#myModal" data-toggle="modal" class="far fa-trash-alt mx-2" title="Delete Note"></i>
                    <i class="fas fa-thumbtack" title="Mark as Important"></i>
                  </div>
              </div>
        </div>
        <div class="modal fade" id="myModal" role="dialog">
    <div class="modal-dialog">
    
      <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header">
          <h1 class="modal-title justify-content-center w-100 text-danger text-uppercase">Delete Confirmation</h1>
        </div>
        <div class="modal-body">
            <p style="font-size:1.6rem !important;">Do you want to delete <strong><mark><span class="text-danger font-italic font-weight-bold">${element.title}</span></mark></strong> note?</p> 
        </div>
        <div class="modal-footer">
            <button type="button" id="${index}"onclick="deleteNote(this.id)" class="btn btn-primary" data-dismiss="modal">Delete</button>
            <button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>
        </div>
      </div>   
    </div>
  </div>`;
  });
  let notesElm = document.getElementById("notes");
  if (notesObj.length != 0) {
    notesElm.innerHTML = html;
  } else {
    notesElm.innerHTML = `Nothing to show! Use "Add a Note" section above to add notes.`;
  }
}

// Function to delete a note
function deleteNote(index) {
//   console.log("I am deleting", index);

  let notes = localStorage.getItem("notes");
  if (notes == null) {
    notesObj = [];
  } else {
    notesObj = JSON.parse(notes);
  }

  notesObj.splice(index, 1);
  localStorage.setItem("notes", JSON.stringify(notesObj));
  showNotes();
}

let search = document.getElementById('searchTxt');
search.addEventListener("input", function(){

		let inputVal = search.value.toLowerCase();
		// console.log('Input event fired!', inputVal);
		let noteCards = document.getElementsByClassName('noteCard');
		Array.from(noteCards).forEach(function(element){
		let cardTxt = element.getElementsByTagName("p")[0].innerText;
		let cardTitle = element.getElementsByTagName("h5")[0].innerText;
		if(cardTxt.toLowerCase().includes(inputVal)  ||   cardTitle.toLowerCase().includes(inputVal)){
		  element.style.display = "block";
		}
		else{
		  element.style.display = "none";
		}
		// console.log(cardTxt); 
		})
})



/*
Further Features:
1. Add Title
2. Mark a note as Important
3. Separate notes by user
4. Sync and host to web server
*/

  </script>
</body>
</html>